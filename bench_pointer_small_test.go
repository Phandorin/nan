package nel

import (
	"testing"

	jsoniter "github.com/json-iterator/go"
)

type pointersSmall struct {
	field000 *string
	field001 *string
	field002 *string
	field003 *string
	field004 *string
	field005 *string
}

func pointerSmallString() *string {
	s := "01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890" +
		"01234567890012345678900123456789001234567890012345678900123456789001234567890012345678900123456789001234567890"

	return &s
}

func newPointerSmall() pointersSmall {
	return pointersSmall{
		field000: pointerSmallString(),
		field001: pointerSmallString(),
		field002: pointerSmallString(),
		field003: pointerSmallString(),
		field004: pointerSmallString(),
		field005: pointerSmallString(),
	}
}

func callPointerSmall(v pointersSmall) {
}

func callPointerSmallJSON(v []byte) {
}

func BenchmarkPointersSmall(b *testing.B) {
	for i := 0; i < b.N; i++ {
		v := newPointerSmall()
		callPointerSmall(v)
	}

	b.StopTimer()
}

func BenchmarkPointersSmallJSON(b *testing.B) {
	for i := 0; i < b.N; i++ {
		v := newPointerSmall()

		enc, _ := jsoniter.Marshal(v)
		callPointerSmallJSON(enc)
	}

	b.StopTimer()
}
